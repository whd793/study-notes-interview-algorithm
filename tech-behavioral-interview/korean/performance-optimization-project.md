# 성능 최적화 프로젝트 경험에 대해 말씀해주세요

글로벌 미디어 스트리밍 서비스의 웹 애플리케이션 성능을 개선하는 프로젝트를 진행했습니다. 이 프로젝트는 사용자 이탈률 증가와 모바일 사용자로부터의 성능 관련 불만 증가로 인해 시작되었습니다.

프로젝트 착수 전, 현재 성능 상태를 정확히 파악하기 위해 종합적인 성능 감사를 실시했습니다. WebPageTest, Lighthouse, Chrome DevTools를 활용하여 다양한 디바이스와 네트워크 환경에서 주요 성능 지표(LCP, FID, CLS, TTI 등)를 측정했습니다. 또한 실제 사용자 측정(RUM) 데이터를 분석하여 사용자 환경에서의 실제 성능을 파악했습니다.

분석 결과, 주요 성능 병목 지점을 다음과 같이 식별했습니다:
1. 초기 로드 시 대용량 JavaScript 번들
2. 최적화되지 않은 이미지와 비디오 자산
3. 렌더링 차단 리소스
4. 비효율적인 API 호출과 데이터 관리
5. 느린 서드파티 스크립트

이러한 문제를 해결하기 위해 다음과 같은 전략을 수립하고 실행했습니다:

첫째, JavaScript 번들 크기를 최적화했습니다. 코드 스플리팅을 적용하여 초기 로드에 필요한 코드만 다운로드하도록 했고, 동적 임포트를 통해 필요한 시점에 코드를 로드하도록 구현했습니다. 또한 트리 셰이킹을 적용하여 사용하지 않는 코드를 제거했고, 무거운 라이브러리는 더 가벼운 대안으로 대체했습니다(예: Moment.js를 date-fns로 교체).

둘째, 이미지와 비디오 최적화에 중점을 두었습니다. WebP와 AVIF 같은 현대적 포맷을 도입하고, 반응형 이미지 기법을 적용했습니다. 또한 Cloudinary를 활용한 이미지 CDN을 구축하여 디바이스별로 최적화된 이미지를 자동으로 제공했습니다. 비디오 콘텐츠는 적응형 비트레이트 스트리밍을 적용하여 네트워크 상태에 따라 품질을 조정하도록 했습니다.

셋째, 중요 렌더링 경로를 최적화했습니다. CSS는 중요 스타일만 인라인으로 포함시키고 나머지는 비동기로 로드했습니다. 또한 폰트 로딩 전략을 개선하여 폰트 파일을 사전 로드하고, font-display: swap을 적용하여 텍스트가 즉시 표시되도록 했습니다.

넷째, 데이터 페칭 전략을 개선했습니다. API 응답을 캐싱하기 위해 서비스 워커를 구현하고, GraphQL을 도입하여 오버페칭 문제를 해결했습니다. 또한 서버와 클라이언트 간의 상태 관리를 최적화하기 위해 React Query를 도입했습니다.

다섯째, 서드파티 스크립트 관리 전략을 수립했습니다. 비필수적인 스크립트는 지연 로딩으로 처리하고, 가능한 경우 self-hosted로 전환했습니다. 또한 Resource Hints(dns-prefetch, preconnect)를 활용하여 외부 도메인 연결을 최적화했습니다.

이 프로젝트에서 가장 도전적이었던 부분은 성능 개선과 풍부한 사용자 경험 사이의 균형을 맞추는 것이었습니다. 예를 들어, 홈페이지의 애니메이션 효과는 브랜드 정체성의 중요한 부분이었지만 성능에 부정적인 영향을 미쳤습니다. 이를 해결하기 위해 IntersectionObserver를 활용하여 뷰포트에 들어올 때만 애니메이션을 활성화하고, 하드웨어 가속을 최대한 활용하는 최적화된 애니메이션을 구현했습니다.

또한 레거시 코드와의 호환성을 유지하면서 점진적으로 개선하는 것도 어려운 과제였습니다. 변경 사항이 기존 기능에 영향을 미치지 않도록 철저한 테스트 전략을 수립했고, A/B 테스트를 통해 각 최적화의 효과를 검증했습니다.

성능 최적화는 지속적인 과정이기 때문에, 자동화된 성능 모니터링 시스템을 구축했습니다. Lighthouse CI를 CI/CD 파이프라인에 통합하여 코드 변경이 성능에 미치는 영향을 지속적으로 추적했고, New Relic과 같은 도구를 활용하여 실제 사용자 경험을 모니터링했습니다.

이 프로젝트의 결과, 모바일에서의 Largest Contentful Paint가 5.2초에서 2.1초로 개선되었고, 전체적인 페이지 로드 시간이 40% 감소했습니다. 이러한 성능 개선은 사용자 참여도 지표에도 긍정적인 영향을 미쳐, 이탈률이 15% 감소하고 평균 세션 시간이 20% 증가했습니다.

이 프로젝트를 통해 웹 성능 최적화의 복잡성과 중요성을 깊이 이해하게 되었고, 사용자 경험과 기술적 제약 사이의 균형을 맞추는 방법을 배웠습니다. 또한 성능이 단순한 기술적 문제가 아니라 비즈니스 성과에 직접적인 영향을 미치는 중요한 요소임을 다시 한번 확인했습니다.