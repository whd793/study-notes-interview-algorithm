# 제로 다운타임 배포 전략

제로 다운타임 배포(또는 연속 배포)는 서비스 중단 없이 시스템 업데이트를 가능하게 합니다. 이 접근 방식은 새로운 기능을 도입하거나 버그를 수정하는 동안 가용성을 유지하며, 이는 24/7 운영이 필요한 시스템에 중요합니다.

가장 일반적인 전략으로는 다음과 같은 것들이 있습니다:

블루-그린 배포: 두 개의 동일한 프로덕션 환경(블루와 그린)을 유지합니다. 언제든지 하나만 프로덕션 트래픽을 처리합니다. 새 코드는 비활성 환경에 배포되어 테스트된 후 트래픽이 전환됩니다. 이전 환경으로 다시 전환하여 간단하게 롤백할 수 있고 프로덕션과 동일한 조건에서 완전한 테스트가 가능하다는 장점이 있습니다. 두 환경을 유지해야 하는 비용과 데이터베이스 스키마 변경 처리의 어려움이 과제입니다.

카나리 배포: 트래픽의 작은 비율을 새 버전으로 점진적으로 라우팅하여, 확대하기 전에 문제를 모니터링합니다. 이는 사용자의 일부에게만 영향을 제한하면서 문제에 대한 조기 경고를 제공합니다. 카나리 배포는 정교한 트래픽 라우팅 및 모니터링 기능이 필요하지만 뛰어난 위험 완화 기능을 제공합니다.

롤링 배포: 클러스터의 인스턴스를 한 번에 하나씩 또는 작은 그룹으로 업데이트합니다. 업데이트가 진행되는 동안 트래픽은 계속해서 업데이트되지 않은 인스턴스로 흐릅니다. 이 방식은 블루-그린보다 적은 인프라가 필요하지만 배포 시간이 길어지고 서비스 간 호환성을 처리할 때 복잡성이 증가합니다.

기능 토글: 코드 변경은 프로덕션에 배포되지만 구성을 통해 활성화될 때까지 비활성 상태로 유지됩니다. 이를 통해 배포와 릴리스를 별개의 문제로 분리할 수 있습니다. 이는 트렁크 기반 개발과 A/B 테스트를 가능하게 하지만 코드 복잡성을 증가시킵니다.

모든 제로 다운타임 전략에 대한 주요 고려 사항으로는 데이터베이스 스키마 마이그레이션(하위 호환 변경 사용, 스키마 버전 관리, 이중 쓰기), 배포 중 진행 중인 트랜잭션 처리, 버전 간 API 호환성 유지, 배포 문제를 빠르게 감지하기 위한 포괄적인 모니터링 구현 등이 있습니다.