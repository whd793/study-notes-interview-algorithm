# API 버전 관리 전략

API 버전 관리는 기존 클라이언트에 대한 하위 호환성을 유지하면서 API를 발전시키는 데 필수적입니다. 각각 다른 트레이드오프를 가진 여러 접근 방식이 있습니다.

URI 경로 버전 관리는 URL 경로에 버전을 포함시킵니다(예: `/api/v1/products`). 이 접근 방식은 가시성이 높고 브라우저에서 쉽게 테스트할 수 있으며 이해하기 쉽지만, 동일한 리소스가 다른 URL에 존재한다고 제안함으로써 REST 원칙을 위반합니다.

쿼리 매개변수 버전 관리는 버전을 쿼리 매개변수로 지정합니다(예: `/api/products?version=1`). 이는 일관된 리소스 URL을 유지하고 버전을 선택적으로 만들지만, 문서에서 간과될 수 있고 캐싱을 복잡하게 만듭니다.

헤더 기반 버전 관리는 사용자 지정 HTTP 헤더(예: `Accept-Version: 1.0`) 또는 Accept 헤더를 사용한 콘텐츠 협상을 사용합니다. 이 접근 방식은 URL을 깔끔하게 유지하고 HTTP 표준과 잘 맞지만, 가시성이 낮고 간단한 도구로 테스트하기 어렵습니다.

콘텐츠 협상은 사용자 지정 미디어 타입(예: `Accept: application/vnd.company.app-v2+json`)과 함께 HTTP Accept 헤더를 활용합니다. 이는 HTTP 표준을 잘 따르지만 복잡성을 더하고 가시성을 줄입니다.

버전 관리를 구현할 때 다음과 같은 모범 사례를 고려하세요: 주요 변경 사항에 대해서만 필요할 때 버전을 지정하고, 변경 영향을 전달하기 위해 시맨틱 버전 관리를 사용하며, 문서화된 기간 동안 이전 버전을 유지하고, 버전 간 마이그레이션 가이드를 제공하며, 지원되는 모든 버전에 대한 적절한 테스트를 구현하세요.

추가 고려 사항으로는 처음부터 확장성을 위한 설계(미래의 필요를 수용할 수 있는 필드 사용), 선택적 기능 노출을 위한 기능 플래그 활용, 폐기 결정을 알리기 위한 버전 사용 모니터링, 개발자 문서와 폐기 공지를 통한 변경 사항 명확한 전달 등이 있습니다.