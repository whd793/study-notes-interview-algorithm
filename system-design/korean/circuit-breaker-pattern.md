# 서킷 브레이커 패턴

서킷 브레이커 패턴은 장애를 감지하고 실패할 가능성이 높은 원격 서비스 호출을 처리하는 로직을 캡슐화하여 분산 시스템에서 연쇄 실패를 방지합니다. 이는 전기 회로 차단기처럼 작동하여 자동으로 장애를 감지하고 실패할 가능성이 높은 작업 시도를 중지합니다.

이 패턴은 Closed(정상 작동), Open(실패 - 요청 즉시 거부), Half-Open(서비스 복구 여부 테스트)의 세 가지 상태를 포함합니다. 시스템이 정상일 때는 회로가 닫혀 있습니다. 지정된 수의 실패 후에는 회로가 열리며, 구성된 타임아웃 기간 동안 추가 요청을 방지합니다. 이 기간 후에는 회로가 반개방 상태로 전환되어 제한된 수의 테스트 요청을 허용합니다. 이러한 요청이 성공하면 회로가 닫히고, 실패하면 다시 열립니다.

구현을 위해서는 일반적으로 실패 횟수와 유형 추적, 구성 가능한 임계값, 타임아웃 기간, 대체 메커니즘이 필요합니다. 일반적인 라이브러리로는 Hystrix(Java), Polly(.NET), Resilience4j가 있습니다. 고급 구현에는 실패율 계산을 위한 슬라이딩 윈도우와 다양한 유형의 실패에 대한 서로 다른 서킷 브레이커가 포함될 수 있습니다.

이 패턴은 여러 이점을 제공합니다: 부분 정전 중 시스템 과부하 방지, 대체 방안을 통한 우아한 성능 저하, 타임아웃을 기다리지 않고 실패 응답 속도 향상, 실패한 구성 요소가 복구될 수 있도록 합니다. 서킷 브레이커를 구현할 때는 적절한 대체 전략 정의, 다양한 실패 유형의 적절한 분류, 회로 상태 변경에 대한 적절한 모니터링 및 경고 보장이 중요합니다.