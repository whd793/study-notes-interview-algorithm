# 고가용성 데이터베이스 설계

고가용성 데이터베이스 시스템은 하드웨어 장애, 네트워크 문제 또는 유지 관리 활동 중에도 서비스 중단 없이 지속적인 운영을 제공하는 것을 목표로 합니다. 이러한 시스템은 애플리케이션 요구 사항에 따라 일관성, 가용성, 분할 내성의 균형을 맞춥니다.

기본 아키텍처는 여러 수준에서 중복성을 활용합니다: 데이터베이스 복제를 통한 서버 중복성, 구성 요소 중복성(중복 네트워크 경로, 전원 공급 장치, 디스크), 그리고 여러 데이터 센터나 가용성 영역에 걸친 지리적 중복성.

프라이머리-레플리카(마스터-슬레이브) 복제 구성은 여러 읽기 전용 복제본과 함께 하나의 쓰기 가능한 기본 노드를 유지합니다. 동기식 복제는 일관성을 보장하지만 성능에 영향을 미칠 수 있으며, 비동기식 복제는 장애 발생 시 잠재적인 데이터 손실을 대가로 성능을 향상시킵니다. 다중 마스터 구성은 어느 노드에나 쓰기를 허용하지만 복잡한 충돌 해결 요구 사항을 도입합니다.

자동화된 장애 조치 메커니즘은 기본 노드 장애를 감지하고 복제본을 기본 상태로 승격시킵니다. 이에는 상태 모니터링 서비스, 리더 선출 프로토콜, 클라이언트를 리디렉션하기 위한 DNS 또는 프록시 계층 업데이트가 포함됩니다. 복구 시간 목표(RTO)와 복구 지점 목표(RPO) 메트릭은 허용 가능한 다운타임과 데이터 손실 한도를 정의합니다.

연결 관리는 헬스 체크와 함께 연결 풀링과 로드 밸런서를 사용하여 운영 노드로만 트래픽을 라우팅합니다. 읽기-쓰기 분할은 읽기 쿼리를 복제본으로 보내고 쓰기를 기본 노드로 보내 부하를 분산하고 읽기 확장성을 향상시킵니다.

데이터 내구성은 쓰기 전 로깅(WAL), 중복 스토리지, 특정 시점 복구 기능과 같은 기술을 통해 하드웨어 장애에도 정보가 보존되도록 보장합니다. 백업 전략은 전체 복구 가능성을 위해 전체 백업, 증분 변경 및 트랜잭션 로그를 결합합니다.

지리적으로 분산된 배포는 데이터센터 수준의 장애로부터 보호하기 위해 다중 지역 복제를 사용합니다. 활성-패시브 구성은 보조 지역에 대기 환경을 유지하는 반면, 활성-활성 설정은 양방향 복제로 여러 지역에서 동시에 트래픽을 처리합니다.

운영 고려 사항으로는 중단 없는 유지 관리 절차 구현, 알림이 있는 자동화된 모니터링, 정기적인 장애 조치 훈련 실시, 복구 시나리오에 대한 상세한 런북 유지, 가용성 이벤트 후 철저한 사후 사고 분석 실시 등이 있습니다.