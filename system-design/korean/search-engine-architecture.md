# 검색 엔진 아키텍처

검색 엔진은 비구조화 또는 준구조화된 데이터를 빠르고 관련성 있는 정보 검색이 가능한 쿼리 가능한 인덱스로 변환합니다. 현대적인 검색 아키텍처는 크롤링, 인덱싱, 쿼리 처리, 랭킹 구성 요소를 포함합니다.

크롤링 구성 요소는 다양한 소스에서 콘텐츠를 발견하고 가져옵니다 - 웹 크롤러는 인터넷 콘텐츠용, 커넥터는 데이터베이스와 API용, 파일 시스템 스캐너는 문서용 등이 있습니다. 크롤링 전략은 우선순위 알고리즘과 정중함 정책(robots.txt 및 속도 제한 존중)을 통해 신선도, 완전성, 자원 활용 사이의 균형을 맞춥니다.

인덱싱은 원시 콘텐츠를 검색에 최적화된 데이터 구조로 변환합니다. 이 과정에는 텍스트 추출, 토큰화, 정규화, 불용어 제거, 스테밍/표제어 추출이 포함됩니다. 역인덱스는 용어를 위치 정보가 있는 문서 ID에 매핑하고, 순방향 인덱스는 문서 검색과 특성 추출을 지원합니다. 지오스패셜이나 숫자 범위 인덱스와 같은 추가 특수 인덱스는 복잡한 쿼리를 지원합니다.

쿼리 처리는 사용자 쿼리를 실행 가능한 검색 계획으로 변환합니다. 여기에는 구문 분석, 쿼리 의도 이해, 용어 확장(동의어, 철자 수정), 최적화를 위한 쿼리 재작성이 포함됩니다. 복잡한 쿼리는 병렬로 실행되는 하위 쿼리로 분할될 수 있습니다.

랭킹은 관련성, 인기도, 최신성, 개인화 요소를 기반으로 결과 순서를 결정합니다. TF-IDF와 BM25는 기본적인 텍스트 관련성을 제공하고, 머신 러닝 모델은 사용자 행동 데이터를 포함한 수백 개의 신호를 통합합니다. 랭킹 학습 접근 방식은 클릭 데이터와 명시적 피드백을 사용하여 모델을 훈련시킵니다.

검색 아키텍처는 일반적으로 수평적 확장을 위해 샤딩된 인덱스를 사용하는 분산 접근 방식을 채택합니다. 각 샤드는 문서의 하위 집합을 포함하고, 복제는 중복성과 쿼리 병렬성을 제공합니다. 쿼리 팬아웃은 샤드 전체에 요청을 분산하고 랭킹 전에 결과를 병합합니다.

성능 최적화 기법으로는 여러 수준에서의 캐싱(쿼리 결과, 문서 데이터, 용어 사전), 일반적인 쿼리 사전 계산, 계층화된 인덱스(메모리에 핫 용어, 디스크에 희귀 용어), 타입어헤드와 퍼지 매칭과 같은 기능을 위한 근사 알고리즘 등이 있습니다.