# Next.js 서버 컴포넌트 인터뷰 답변

React 서버 컴포넌트는 React 18과 Next.js 13 이상에서 도입된 혁신적인 기능으로, 컴포넌트를 서버에서 렌더링하고 그 결과만 클라이언트로 전송하는 새로운 패러다임을 제시합니다. Next.js의 App Router는 이 서버 컴포넌트를 기본적으로 지원하며, 이는 전통적인 클라이언트 컴포넌트와는 여러 측면에서 다릅니다.

서버 컴포넌트의 주요 장점은 먼저 번들 크기 최적화입니다. 서버에서만 실행되므로 컴포넌트 코드와 그 종속성이 클라이언트 JavaScript 번들에 포함되지 않습니다. 이는 특히 큰 라이브러리를 사용하는 경우 중요한 이점입니다. 또한 서버 리소스에 직접 접근할 수 있어, 데이터베이스, 파일 시스템 등에 직접 연결하여 데이터를 가져올 수 있습니다. API 라우트 없이 백엔드 로직을 직접 작성할 수 있어 개발 과정이 간소화됩니다.

```jsx
// 서버 컴포넌트 예시
async function UserProfile({ userId }) {
  // 서버에서 직접 데이터베이스에 접근 (클라이언트로 코드 전송 안 됨)
  const user = await db.users.findUnique({ where: { id: userId } });
  
  return (
    <div>
      <h1>{user.name}</h1>
      <p>{user.email}</p>
    </div>
  );
}
```

서버 컴포넌트는 일부 제한사항이 있습니다. 상호작용적인 기능(이벤트 핸들러, useState, useEffect 등)을 사용할 수 없고, 브라우저 API에 접근할 수 없으며, 상태를 유지할 수 없습니다. 이러한 기능이 필요한 경우 클라이언트 컴포넌트를 사용해야 합니다.

```jsx
// 클라이언트 컴포넌트 예시
'use client' // 클라이언트 컴포넌트 지시어

import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);
  
  return (
    <button onClick={() => setCount(count + 1)}>
      Count: {count}
    </button>
  );
}
```

서버 컴포넌트와 클라이언트 컴포넌트는 같은 컴포넌트 트리에서 함께 사용할 수 있습니다. 일반적인 패턴은 가능한 많은 로직을 서버 컴포넌트로 구현하고, 인터랙티브한 UI 부분만 클라이언트 컴포넌트로 만드는 것입니다. 클라이언트 컴포넌트는 서버 컴포넌트를 import할 수 없지만, 서버 컴포넌트는 클라이언트 컴포넌트를 자식으로 사용할 수 있습니다.

서버 컴포넌트의 도입으로 데이터 페칭 패턴도 변화했습니다. 서버 컴포넌트에서는 async/await를 사용하여 직접 데이터를 가져올 수 있으며, 이는 Next.js의 fetch 함수로 자동 중복 제거(deduplication)와 캐싱 기능을 제공받습니다.

실제 프로젝트에서는 서버 컴포넌트를 통해 데이터를 가져오고 레이아웃을 구성하며, 인터랙티브한 부분만 클라이언트 컴포넌트로 구현하는 접근법이 효과적입니다. 이는 초기 로딩 성능을 개선하고 사용자 경험을 향상시키는 데 큰 도움이 됩니다.